{% extends 'base.html' %}
{% from '_partials_learning.html' import flashcard, mcq %}
{% block title %}Normalization & Dependencies{% endblock %}
{% block content %}
<div class="hero">
  <h2>Normalization &amp; Dependencies</h2>
  <p>Refine your schema by eliminating anomalies and understanding how attributes depend on one another.</p>
</div>

<div class="module-wrapper">
  <section class="card module-section">
    <span class="pill" style="background:#eef2ff;color:#4f46e5">Chapter: Normalization</span>
    <h2>Normalization</h2>
    <p>Normalization organizes tables so that each fact lives in the right place. Progressing through normal forms removes redundant data, update anomalies, and inconsistent dependencies.</p>
    <p>Use the normal forms to iteratively improve table design while keeping real-world usage in mind.</p>
    <div class="flashcard-grid">
      {{ flashcard("1NF Requirement", "Ensure atomic attribute values and a defined primary key.") }}
      {{ flashcard("2NF Check", "Eliminate partial dependencies on a composite key by moving attributes to new tables.") }}
      {{ flashcard("3NF Insight", "Attributes should depend only on the key, not on other non-key attributes.") }}
    </div>
  </section>

  <section class="card module-section">
    <span class="pill" style="background:#fffbeb;color:#92400e">Chapter: Dependencies</span>
    <h2>Dependencies</h2>
    <p>Functional dependencies capture how attributes determine one another. Mapping them clearly guides normalization steps and highlights when additional tables or keys are needed.</p>
    <p>Practice reading and decomposing dependencies so the design stays flexible and accurate.</p>
    <div class="card mini-quiz-card" id="norm-quiz">
      <h3>3-Question Mini Check</h3>
      {{ mcq("norm_q1","Functional dependencies describe…","Physical storage locations","Deterministic attribute relationships","SQL performance hints","b") }}
      {{ mcq("norm_q2","A table violates 2NF when…","Attributes are atomic","Non-key attributes depend on only part of a composite key","It lacks a surrogate key","b") }}
      {{ mcq("norm_q3","To reach 3NF you must…","Remove all rows","Ensure every non-key attribute depends only on the primary key","Switch to a document store","b") }}
      <p class="mcq-result"></p>
      <p class="completion-badge"></p>
      <button class="btn" onclick="gradeModule('norm-quiz','norm')">Check Answers</button>
    </div>
  </section>
</div>
{% endblock %}
